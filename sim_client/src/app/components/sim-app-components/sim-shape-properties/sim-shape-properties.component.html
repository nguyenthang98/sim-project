<!--Shape name-->
<mat-accordion class="sim-control-panel">
  <mat-expansion-panel class="mat-elevation-z0" [expanded]="true">
    <mat-expansion-panel-header>Name</mat-expansion-panel-header>
    <mat-form-field style="width: 100%">
      <input matInput type="text" placeholder="Shape Name" [ngModel]="shape.name()" (ngModelChange)="shape.name($event)">
    </mat-form-field>
  </mat-expansion-panel>
</mat-accordion>

<!--Geometric-->
<mat-accordion class="sim-control-panel">
  <mat-expansion-panel class="mat-elevation-z0" [expanded]="true">
    <mat-expansion-panel-header>Geometric</mat-expansion-panel-header>
      <div style="width: 100%; display: flex;">
        <sim-input style="flex: 1; max-width: 50%;"
          [type]="'input-box'" [placeholder]="'X'" [value]="shape.x()" [options]="{ inputType: 'number' }"
          (valueChange)="shape.x($event); redrawShape()"
        ></sim-input>

        <sim-input style="flex: 1; max-width: 50%;"
          [type]="'input-box'" [placeholder]="'Y'" [value]="shape.y()" [options]="{ inputType: 'number' }"
          (valueChange)="shape.y($event); redrawShape()"
        ></sim-input>
      </div>

      <div style="width: 100%; display: flex;">
        <sim-input style="flex: 1; max-width: 50%;"
          [type]="'input-box'"  [placeholder]="'Width'" [value]="shape.width() || 0" [options]="{ inputType: 'number' }"
          (valueChange)="shape.width($event); redrawShape()"
        ></sim-input>

        <sim-input style="flex: 1; max-width: 50%;"
          [type]="'input-box'" [placeholder]="'Height'" [value]="shape.height() || 0" [options]="{ inputType: 'number' }"
          (valueChange)="shape.height($event); redrawShape()"
        ></sim-input>
      </div>

      <!--Geometric options-->
      <div *ngIf="shape.getGeometricKeys && shape.getGeometricKeys().length">
        <div *ngFor="let key of shape.getGeometricKeys();">
          <mat-form-field style="width: 100%;">
            <input matInput type="number" placeholder="{{ key }}"
                  [ngModel]="shape[key]()" (ngModelChange)="shape[key]($event); redrawShape()">
          </mat-form-field>
        </div>
      </div>

  </mat-expansion-panel>
</mat-accordion>

<!--
<div>
  <h4>Geometric</h4>

  <div style="width: 100%; display: flex;">
    <sim-input style="flex: 1; max-width: 50%;"
      [type]="'input-box'" [placeholder]="'X'" [value]="shape.x()" [options]="{ inputType: 'number' }"
      (valueChange)="shape.x($event); redrawShape()"
    ></sim-input>

    <sim-input style="flex: 1; max-width: 50%;"
      [type]="'input-box'" [placeholder]="'Y'" [value]="shape.y()" [options]="{ inputType: 'number' }"
      (valueChange)="shape.y($event); redrawShape()"
    ></sim-input>
  </div>

  <div style="width: 100%; display: flex;">
    <sim-input style="flex: 1; max-width: 50%;"
      [type]="'input-box'"  [placeholder]="'Width'" [value]="shape.width() || 0" [options]="{ inputType: 'number' }"
      (valueChange)="shape.width($event); redrawShape()"
    ></sim-input>

    <sim-input style="flex: 1; max-width: 50%;"
      [type]="'input-box'" [placeholder]="'Height'" [value]="shape.height() || 0" [options]="{ inputType: 'number' }"
      (valueChange)="shape.height($event); redrawShape()"
    ></sim-input>
  </div>

  <div *ngIf="shape.getGeometricKeys && shape.getGeometricKeys().length">
    <div *ngFor="let key of shape.getGeometricKeys();">
      <mat-form-field style="width: 100%;">
        <input matInput type="number" placeholder="{{ key }}"
               [ngModel]="shape[key]()" (ngModelChange)="shape[key]($event); redrawShape()">
      </mat-form-field>
    </div>
  </div>
</div>
-->

<mat-accordion class="sim-control-panel">
  <mat-expansion-panel class="mat-elevation-z0" [expanded]="true">
    <mat-expansion-panel-header>Fill & Stroke</mat-expansion-panel-header> 
      <div style="width: 100%">
        <sim-input
          [label]="'Enable fill'" [type]="'toggle'" [value]="shape.fillEnabled()" (valueChange)="shape.fillEnabled($event); redrawShape()"
        ></sim-input>
      </div>

      <div *ngIf="shape.fillEnabled()" style=" margin: 1em 0; display: flex; flex-direction: row; align-items: center;">
          <sim-color-picker
            style="width: 100%"
            [label]="'Fill color'"
            [color]="shape.fill()"
            (colorChange)="shape.fill($event); redrawShape();">
          </sim-color-picker>
      </div>

      <div style="width: 100%">
        <sim-input [label]="'Enable stroke'" [type]="'toggle'" [value]="shape.strokeEnabled()"
          (valueChange)="shape.strokeEnabled($event); redrawShape()"
        ></sim-input>
      </div>

      <div *ngIf="shape.strokeEnabled()">
        <div style="width: 100%">
          <sim-color-picker
            [label]="'Stroke'"
            [color]="shape.stroke()"
            (colorChange)="shape.stroke($event); redrawShape()"
          ></sim-color-picker>
        </div>

        <div style="width: 100%">
          <sim-input
            [label]="'Stroke width'" [type]="'slider'" [options]="{min: 1, max: 100, step: 0.01, showInputBox: true, thumbLabel: false}"
            [value]="shape.strokeWidth()" (valueChange)="shape.strokeWidth($event); redrawShape();"
          ></sim-input>
        </div>

        <div style="width: 100%;">
          <sim-input [type]="'classic-input-box'" [label]="'Dash'" [options]="{ inputType: 'text' }" [placeholder]="'Space separated'"
            [value]="dashArrToString(shape.dash())" (valueChange)="shape.dash(stringToDashArr($event)); redrawShape()"
          ></sim-input> 
        </div>

        <!--Line Join And Cap-->
        <div style="width: 100%;">
          <sim-input [type]="'dropdown'" [label]="'Line Join'"
            [value]="shape.lineJoin() || 'miter'" [options]="['miter', 'round', 'bevel']"
            (valueChange)="shape.lineJoin($event); redrawShape()"
          ></sim-input>
        </div>
        <div style="width: 100%;">
          <sim-input [type]="'dropdown'" [label]="'Line Cap'"
            [value]="shape.lineCap() || 'butt'" [options]="['butt', 'round', 'square']"
            (valueChange)="shape.lineCap($event); redrawShape()"
          ></sim-input>
        </div>
      </div>
  </mat-expansion-panel>
</mat-accordion>

<!--Color management and border-->
<!--
<div>
  <h4>Fill & Stroke</h4>

  <div style="width: 100%">
    <sim-input
      [label]="'Enable fill'" [type]="'toggle'" [value]="shape.fillEnabled()" (valueChange)="shape.fillEnabled($event); redrawShape()"
    ></sim-input>
  </div>

  <div *ngIf="shape.fillEnabled()" style=" margin: 1em 0; display: flex; flex-direction: row; align-items: center;">
      <sim-color-picker
        style="width: 100%"
        [label]="'Fill color'"
        [color]="shape.fill()"
        (colorChange)="shape.fill($event); redrawShape();">
      </sim-color-picker>
  </div>

  <div style="width: 100%">
    <sim-input [label]="'Enable stroke'" [type]="'toggle'" [value]="shape.strokeEnabled()"
      (valueChange)="shape.strokeEnabled($event); redrawShape()"
    ></sim-input>
  </div>

  <div *ngIf="shape.strokeEnabled()">
    <div style="width: 100%">
      <sim-color-picker
        [label]="'Stroke'"
        [color]="shape.stroke()"
        (colorChange)="shape.stroke($event); redrawShape()"
      ></sim-color-picker>
    </div>

    <div style="width: 100%">
      <sim-input
        [label]="'Stroke width'" [type]="'slider'" [options]="{min: 1, max: 100, step: 0.01, showInputBox: true, thumbLabel: false}"
        [value]="shape.strokeWidth()" (valueChange)="shape.strokeWidth($event); redrawShape();"
      ></sim-input>
    </div>

    <div style="width: 100%;">
      <sim-input [type]="'classic-input-box'" [label]="'Dash'" [options]="{ inputType: 'text' }" [placeholder]="'Space separated'"
        [value]="dashArrToString(shape.dash())" (valueChange)="shape.dash(stringToDashArr($event)); redrawShape()"
      ></sim-input> 
    </div>

    <div style="width: 100%;">
      <sim-input [type]="'dropdown'" [label]="'Line Join'"
        [value]="shape.lineJoin() || 'miter'" [options]="['miter', 'round', 'bevel']"
        (valueChange)="shape.lineJoin($event); redrawShape()"
      ></sim-input>
    </div>
    <div style="width: 100%;">
      <sim-input [type]="'dropdown'" [label]="'Line Cap'"
        [value]="shape.lineCap() || 'butt'" [options]="['butt', 'round', 'square']"
        (valueChange)="shape.lineCap($event); redrawShape()"
      ></sim-input>
    </div>
  </div>
</div>
-->